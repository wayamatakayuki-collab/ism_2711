<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>夷隅教育会館 管理アプリ</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    body { background:#f8fafc; }
    .grid-10min { background-size: 100% 10px; }
    .hour-line { border-top:2px solid #cbd5e1; }
    .half-line { border-top:1px solid #e2e8f0; }
    .ten-line { border-top:1px dashed #f1f5f9; }
  </style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">

const { useState, useEffect } = React;

function App() {
  const [tab, setTab] = useState("week");

  return (
    <div className="p-4 space-y-4">
      <h1 className="text-xl font-bold">夷隅教育会館 管理アプリ</h1>

      <div className="flex gap-2 flex-wrap">
        {[
          ["week","週間"],
          ["year","年間"],
          ["equip","機材管理"],
          ["staff","役員予定"],
          ["monitor","モニター表示"]
        ].map(([id,label])=>(
          <button key={id}
            onClick={()=>setTab(id)}
            className={`px-4 py-2 rounded-xl ${tab===id?"bg-blue-600 text-white":"bg-white border"}`}>
            {label}
          </button>
        ))}
      </div>

      {tab==="week" && <WeekView />}
      {tab==="year" && <YearView />}
      {tab==="equip" && <EquipView />}
      {tab==="staff" && <StaffView />}
      {tab==="monitor" && <MonitorView />}
    </div>
  );
}

/* ======================
   週間表（本格UI）
====================== */
function WeekView(){
  const hours = [...Array(24)].map((_,i)=>i);

  return (
    <div className="border rounded-xl bg-white overflow-auto h-[70vh] relative">
      <div className="grid grid-cols-[60px_repeat(7,1fr)] sticky top-0 bg-white z-20 border-b">
        <div></div>
        {["月","火","水","木","金","土","日"].map(d=>(
          <div key={d} className="text-center font-bold py-2">{d}</div>
        ))}
      </div>

      <div className="relative">
        {hours.map(h=>(
          <div key={h} className="grid grid-cols-[60px_repeat(7,1fr)]">
            <div className="text-xs text-right pr-1 py-1 border-r sticky left-0 bg-white z-10">{h}:00</div>
            {[...Array(7)].map((_,i)=>(
              <div key={i} className="h-16 border-b border-slate-100"></div>
            ))}
          </div>
        ))}
      </div>
    </div>
  );
}

/* ======================
   年間予定（俯瞰）
====================== */
function YearView(){
  const [range,setRange]=useState(3);

  return (
    <div className="bg-white p-4 rounded-xl space-y-3">
      <h2 className="font-bold text-lg">年間予定（俯瞰）</h2>

      <div className="flex gap-2">
        {[1,3,6,12].map(m=>(
          <button key={m}
            onClick={()=>setRange(m)}
            className={`px-3 py-1 rounded ${range===m?"bg-blue-600 text-white":"border"}`}>
            今後{m}ヶ月
          </button>
        ))}
      </div>

      <div className="text-sm text-slate-500">
        ※ Firestore連動時はここに未来予定が一覧表示されます。
      </div>
    </div>
  );
}

/* ======================
   機材管理
====================== */
function EquipView(){
  const [list,setList]=useState([
    {id:1,name:"プロジェクタ",count:2},
    {id:2,name:"ノートPC",count:5}
  ]);
  const [name,setName]=useState("");
  const [count,setCount]=useState(1);

  const add=()=>{
    setList([...list,{id:Date.now(),name,count}]);
    setName("");setCount(1);
  };

  return (
    <div className="bg-white p-4 rounded-xl space-y-3">
      <h2 className="font-bold text-lg">機材マスタ管理</h2>

      {list.map(e=>(
        <div key={e.id} className="flex justify-between border-b py-1 text-sm">
          <span>{e.name}</span>
          <span>{e.count} 台</span>
        </div>
      ))}

      <div className="flex gap-2 pt-2">
        <input value={name} onChange={e=>setName(e.target.value)} placeholder="機材名" className="border p-1 rounded"/>
        <input type="number" value={count} onChange={e=>setCount(+e.target.value)} className="border p-1 rounded w-20"/>
        <button onClick={add} className="bg-blue-600 text-white px-3 rounded">追加</button>
      </div>
    </div>
  );
}

/* ======================
   書記長・次長予定
====================== */
function StaffView(){
  return (
    <div className="bg-white p-4 rounded-xl">
      <h2 className="font-bold text-lg">書記長・書記次長 年間予定</h2>
      <p className="text-sm text-slate-500 mt-2">
        ※ Firestore連動時、ここに年間予定を登録・管理できます。
      </p>
    </div>
  );
}

/* ======================
   モニター表示
====================== */
function MonitorView(){
  const [date,setDate]=useState(new Date());

  const format=d=>d.toISOString().slice(0,10);
  const change=(n)=>{
    const d=new Date(date);
    d.setDate(d.getDate()+n);
    setDate(d);
  };

  const fullscreen=()=>{
    document.documentElement.requestFullscreen?.();
  };

  return (
    <div className="bg-black text-white p-6 rounded-xl space-y-4 min-h-[70vh]">
      <div className="flex justify-between items-center">
        <div className="text-3xl font-bold">本日の利用状況</div>
        <div className="text-xl">{format(date)}</div>
      </div>

      <div className="space-y-4 text-2xl">
        <div className="bg-slate-800 p-4 rounded">大会議室　9:00〜12:00　○○団体</div>
        <div className="bg-slate-800 p-4 rounded">和室　　　13:00〜16:00　△△協会</div>
      </div>

      <div className="flex justify-between pt-6">
        <div className="flex gap-3">
          <button onClick={()=>change(-1)} className="bg-white text-black px-4 py-2 rounded">◀ 前日</button>
          <button onClick={()=>change(1)} className="bg-white text-black px-4 py-2 rounded">翌日 ▶</button>
        </div>
        <button onClick={fullscreen} className="bg-blue-600 px-4 py-2 rounded">全画面</button>
      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);

</script>
</body>
</html>
